<idea-plugin>
    <id>com.github.jnhyperion.hyperrobotframeworkplugin</id>
    <name>Hyper RobotFramework Support</name>
    <vendor>jnhyperion</vendor>

    <depends>com.intellij.modules.python</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.xdebugger</depends>

    <extensions defaultExtensionNs="com.intellij">
        <projectConfigurable groupId="language" instance="com.github.jnhyperion.hyperrobotframeworkplugin.ide.config.RobotConfiguration"
                             displayName="Robot Options"/>
        <projectService serviceImplementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.config.RobotOptionsProvider"/>
        <fileType name="Robot Feature" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.RobotFeatureFileType" fieldName="INSTANCE"
                  language="Robot" extensions="robot"/>
        <fileType name="Robot Resource" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.RobotResourceFileType" fieldName="INSTANCE"
                  language="Robot" extensions="resource"/>
        <colorSettingsPage implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.config.RobotColorsPage"/>
        <!-- IDE Hooks -->
        <completion.contributor language="Robot"
                                implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.completion.RobotCompletionContributor"/>
        <lang.findUsagesProvider language="Robot" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.usage.RobotFindUsagesProvider"/>
        <findUsagesHandlerFactory implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.usage.RobotPythonFindUsagesHandlerFactory"/>
        <usageTypeProvider implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.usage.RobotUsageTypeProvider"/>
        <fileStructureGroupRuleProvider implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.usage.RobotKeywordGroupingRuleProvider"/>
        <referencesSearch implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.search.RobotKeywordReferenceSearch"/>
        <referencesSearch implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.search.RobotImportArgumentReferenceSearch"/>
        <lang.syntaxHighlighterFactory language="Robot"
                                       implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.RobotSyntaxHighlightingFactory"/>
        <lang.commenter language="Robot" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotCommenter"/>
        <lang.foldingBuilder language="Robot" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotFoldingBuilder"/>
        <lang.parserDefinition language="Robot" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.RobotParserDefinition"/>
        <stubElementTypeHolder class="com.github.jnhyperion.hyperrobotframeworkplugin.psi.RobotStubTokenTypes" externalIdPrefix="robot."/>
        <stubIndex implementation="com.github.jnhyperion.hyperrobotframeworkplugin.psi.stub.index.KeywordStatementNameIndex"/>
        <stubIndex implementation="com.github.jnhyperion.hyperrobotframeworkplugin.psi.stub.index.PositionalArgumentImportIndex"/>
        <lang.psiStructureViewFactory language="Robot"
                                      implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.structure.RobotStructureViewFactory"/>
        <codeInsight.parameterInfo language="Robot"
                                   implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.parameterinfo.RobotParameterInfoHandler"/>
        <codeInsight.parameterInfo language="Robot"
                                   implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.parameterinfo.RobotParameterInfoHandler"/>
        <!-- Manipulators -->
        <lang.elementManipulator forClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.element.KeywordInvokable"
                                 implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.manip.KeywordInvokableManipulator"/>
        <lang.elementManipulator forClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.element.PositionalArgument"
                                 implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.manip.PositionalArgumentManipulator"/>
        <lang.elementManipulator forClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.element.Variable"
                                 implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.manip.VariableManipulator"/>
        <lang.elementManipulator forClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.element.ParameterId"
                                 implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.psi.manip.ParameterIdManipulator"/>
        <!-- Inspections -->
        <!-- Inspections: Compilation -->
        <localInspection language="Robot" shortName="RobotKeywordNotFound" bundle="messages.RobotBundle" key="INSP.NAME.keyword.undefined" groupPath="Robot"
                         groupKey="INSP.GROUP.compilation" enabledByDefault="true" level="INFO"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.compilation.RobotKeywordNotFound"/>
        <localInspection language="Robot" shortName="RobotVariableNotFound" bundle="messages.RobotBundle" key="INSP.NAME.variable.undefined" groupPath="Robot"
                         groupKey="INSP.GROUP.compilation" enabledByDefault="true" level="INFO"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.compilation.RobotVariableNotFound"/>
        <localInspection language="Robot" shortName="RobotImportNotFound" bundle="messages.RobotBundle" key="INSP.NAME.import.undefined" groupPath="Robot"
                         groupKey="INSP.GROUP.compilation" enabledByDefault="true" level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.compilation.RobotImportNotFound"/>
        <localInspection language="Robot" shortName="RobotKeywordParameterNotFound" bundle="messages.RobotBundle" key="INSP.Name.keyword.parameter.undefined"
                         groupPath="Robot" groupKey="INSP.GROUP.compilation" enabledByDefault="true" level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.compilation.RobotKeywordParameterNotFound"/>
        <localInspection language="Robot" shortName="RobotKeywordParameterMissingValue" bundle="messages.RobotBundle"
                         key="INSP.Name.keyword.parameter.value.undefined" groupPath="Robot" groupKey="INSP.GROUP.compilation" enabledByDefault="true"
                         level="WEAK WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.compilation.RobotKeywordParameterMissingValue"/>
        <!-- TODO: inspection: error?: resource import is not a robot file -->
        <!-- TODO: inspection: warn: import python file vs class -->
        <!-- Inspections: Cleanup -->
        <localInspection language="Robot" shortName="RobotImportNotUsed" bundle="messages.RobotBundle" key="INSP.NAME.import.unused" groupPath="Robot"
                         groupKey="INSP.GROUP.cleanup" enabledByDefault="true" level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.cleanup.RobotImportNotUsed"/>
        <!-- Inspections: Readability -->
        <localInspection language="Robot" shortName="RobotGherkinInspection" bundle="messages.RobotBundle" key="INSP.NAME.gherkin.format" groupPath="Robot"
                         groupKey="INSP.GROUP.readability" enabledByDefault="true" level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.readability.RobotGherkinInspection"/>
        <localInspection language="Robot" shortName="RobotKeywordDefinitionStartingWithGherkin" bundle="messages.RobotBundle"
                         key="INSP.NAME.define.keyword.gherkin.start" groupPath="Robot" groupKey="INSP.GROUP.readability" enabledByDefault="true"
                         level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.readability.RobotKeywordDefinitionStartingWithGherkin"/>
        <!-- TODO: inspection: warn: use of I in keyword; decreased readability -->
        <!-- TODO: inspection: warn: scenario step does not start with gherkin; decreased readability -->
        <!-- TODO: inspection: warn: scenario step is not a keyword (ie variable); decreased readability -->
        <!-- TODO: inspection: warn: scenario step contains arguments; decreased readability -->
        <!-- Inspections: Complexity -->
        <!-- TODO: inspection: warn: keyword definitions that contain gherkin; trying to do too much -->
        <localInspection language="Robot" shortName="RobotNestedVariable" bundle="messages.RobotBundle" key="INSP.NAME.variable.nested" groupPath="Robot"
                         groupKey="INSP.GROUP.complexity" enabledByDefault="true" level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.complexity.RobotNestedVariable"/>
        <localInspection language="Robot" shortName="RobotNestedVariableDefinition" bundle="messages.RobotBundle" key="INSP.NAME.variableDefinition.nested"
                         groupPath="Robot" groupKey="INSP.GROUP.complexity" enabledByDefault="true" level="WARNING"
                         implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.inspections.complexity.RobotNestedVariableDefinition"/>
        <!-- Inspections: Deprecated -->
        <!-- TODO: inspection: warn: deprecated settings; '*** user keywords ***', timeout, etc -->
        <runConfigurationProducer implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.execution.RobotRunConfigurationProducer"/>
        <runLineMarkerContributor language="Robot" id="gradleGroovyRunLineMarkerProvider"
                                  implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.execution.RobotRunLineMarkerProvider"/>
        <postStartupActivity implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.PostStartupActivity"/>
        <internalFileTemplate name="Robot Feature File"/>
        <internalFileTemplate name="Robot Resource File"/>
        <enterHandlerDelegate implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotEnterActionHandler"/>
        <typedHandler implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotTypedActionHandler"/>
        <editorActionHandler action="EditorTab" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotTabActionHandler"/>
        <configurationType implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.execution.RobotRunConfigurationType"/>
        <spellchecker.support language="Robot" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotSpellcheckingStrategy"/>

        <xdebugger.breakpointType implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.debugger.RobotLineBreakpointType"/>
        <xdebugger.breakpointType implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.debugger.RobotExceptionBreakpointType"/>

        <programRunner implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.execution.RobotRunner" id="robotRunner" order="first"/>
        <programRunner implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.debugger.RobotDebugRunner" id="robotDebugRunner"
                       order="after robotRunner"/>

        <executor implementation="com.github.jnhyperion.hyperrobotframeworkplugin.ide.execution.RobotDryRunExecutor"/>

        <weigher key="completion" implementationClass="com.github.jnhyperion.hyperrobotframeworkplugin.ide.completion.RobotContextLevelWeigher" id="context"
                 order="first"/>
    </extensions>
    <actions>
        <action id="HyperRobotFrameworkPlugin.CreateNew" class="com.github.jnhyperion.hyperrobotframeworkplugin.ide.RobotCreateAction">
            <add-to-group group-id="NewGroup"/>
        </action>
    </actions>
</idea-plugin>
